{
  "openapi": "3.0.0",
  "info": {
    "title": "위리브 API",
    "description": "위리브 API 명세서",
    "version": "1.0.0"
  },
  "components": {
    "securitySchemes": {
      "AccessTokenCookie": {
        "type": "apiKey",
        "in": "cookie",
        "name": "access_token",
        "description": "로그인 시 발급되는 JWT 액세스 토큰 (쿠키 기반 인증)"
      }
    }
  },
  "security": [
    {
      "AccessTokenCookie": []
    }
  ],
  "paths": {
    "/api/auth/signup": {
      "post": {
        "description": "",
        "responses": {
          "default": {
            "description": ""
          }
        },
        "tags": [
          "Auth"
        ]
      }
    },
    "/api/auth/signup/admin": {
      "post": {
        "description": "",
        "responses": {
          "default": {
            "description": ""
          }
        },
        "tags": [
          "Auth"
        ]
      }
    },
    "/api/auth/signup/super-admin": {
      "post": {
        "description": "",
        "responses": {
          "default": {
            "description": ""
          }
        },
        "tags": [
          "Auth"
        ]
      }
    },
    "/api/auth/login": {
      "post": {
        "description": "",
        "responses": {
          "default": {
            "description": ""
          }
        },
        "tags": [
          "Auth"
        ]
      }
    },
    "/api/auth/logout": {
      "post": {
        "description": "",
        "responses": {
          "default": {
            "description": ""
          }
        },
        "tags": [
          "Auth"
        ]
      }
    },
    "/api/auth/refresh": {
      "post": {
        "description": "",
        "responses": {
          "default": {
            "description": ""
          }
        },
        "tags": [
          "Auth"
        ]
      }
    },
    "/api/auth/admins/{adminId}/status": {
      "patch": {
        "description": "",
        "responses": {
          "default": {
            "description": ""
          }
        },
        "tags": [
          "Auth"
        ]
      }
    },
    "/api/auth/admins/status": {
      "patch": {
        "description": "",
        "responses": {
          "default": {
            "description": ""
          }
        },
        "tags": [
          "Auth"
        ]
      }
    },
    "/api/auth/residents/{residentId}/status": {
      "patch": {
        "description": "",
        "responses": {
          "default": {
            "description": ""
          }
        },
        "tags": [
          "Auth"
        ]
      }
    },
    "/api/auth/residents/status": {
      "patch": {
        "description": "",
        "responses": {
          "default": {
            "description": ""
          }
        },
        "tags": [
          "Auth"
        ]
      }
    },
    "/api/auth/cleanup": {
      "post": {
        "description": "",
        "responses": {
          "default": {
            "description": ""
          }
        },
        "tags": [
          "Auth"
        ]
      }
    },
    "/api/users/me": {
      "patch": {
        "tags": [
          "Users"
        ],
        "summary": "[사용자] 유저 정보 수정",
        "description": "현재 로그인한 사용자의 정보를 수정합니다. 비밀번호 변경 또는 아바타 이미지 업로드가 가능합니다.",
        "responses": {
          "200": {
            "description": "유저 정보 수정 성공",
            "content": {
              "application/json": {
                "example": {
                  "message": "홍길동님의 정보가 성공적으로 업데이트되었습니다. 다시 로그인해주세요."
                }
              }
            }
          },
          "400": {
            "description": "유저 정보 수정 실패"
          },
          "401": {
            "description": "권한 없음"
          },
          "403": {
            "description": "권한 없음 (비밀번호 불일치 등)"
          },
          "404": {
            "description": "사용자를 찾을 수 없음"
          },
          "500": {
            "description": "서버 내부 오류"
          }
        },
        "requestBody": {
          "required": false,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "currentPassword": {
                    "type": "string",
                    "description": "현재 비밀번호 (새 비밀번호 설정 시 필요)"
                  },
                  "newPassword": {
                    "type": "string",
                    "description": "새 비밀번호"
                  },
                  "file": {
                    "type": "string",
                    "format": "binary",
                    "description": "아바타 이미지 파일 (선택사항)"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/complaints/": {
      "post": {
        "tags": [
          "Complaints"
        ],
        "summary": "[민원] 민원 생성",
        "description": "입주민(USER)이 새로운 민원을 생성합니다. 본인이 속한 아파트의 게시판에만 민원을 작성할 수 있습니다. <br><br>**Request Body:**<br>- title (string, 필수): 민원 제목 (2-100자)<br>- content (string, 필수): 민원 내용 (10-2000자)<br>- isPublic (boolean, 선택): 공개 여부 (기본값: false)<br>- boardId (string, 필수): 게시판 ID (UUID)",
        "responses": {
          "201": {
            "description": "민원 생성 성공",
            "content": {
              "application/json": {
                "example": {
                  "message": "정상적으로 등록 처리되었습니다."
                }
              }
            }
          },
          "400": {
            "description": "잘못된 요청 (필수 필드 누락, 유효성 검증 실패 등)"
          },
          "401": {
            "description": "인증 필요"
          },
          "403": {
            "description": "권한 없음 (USER 역할 필요, 또는 다른 아파트 게시판 접근 시도)"
          }
        },
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "example": {
                "title": "엘리베이터 고장",
                "content": "엘리베이터가 자주 고장나서 불편합니다. 점검 부탁드립니다.",
                "isPublic": false,
                "boardId": "board-uuid-1234"
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "Complaints"
        ],
        "summary": "[민원] 민원 목록 조회",
        "description": "권한에 따라 민원 목록을 조회합니다. USER는 본인이 속한 아파트의 공개 민원 + 본인 작성 민원을 조회하고, ADMIN은 관리 아파트의 모든 민원을 조회합니다. 페이지네이션 및 필터링을 지원합니다.",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "페이지 번호 (기본값: 1)",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "페이지당 항목 수 (기본값: 10, 최대: 100)",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "status",
            "in": "query",
            "description": "민원 상태 필터 (PENDING, IN_PROGRESS, RESOLVED, REJECTED)",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "isPublic",
            "in": "query",
            "description": "공개 여부 필터",
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "dong",
            "in": "query",
            "description": "동 번호 필터",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "ho",
            "in": "query",
            "description": "호수 필터",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "keyword",
            "in": "query",
            "description": "제목 검색 키워드",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "민원 목록 조회 성공",
            "content": {
              "application/json": {
                "example": {
                  "complaints": [
                    {
                      "complaintId": "uuid-1234",
                      "userId": "user-uuid-5678",
                      "title": "엘리베이터 고장",
                      "writerName": "홍길동",
                      "createdAt": "2025-06-13T10:00:00.000Z",
                      "updatedAt": "2025-06-13T15:30:00.000Z",
                      "isPublic": true,
                      "viewsCount": 42,
                      "commentsCount": 3,
                      "status": "IN_PROGRESS",
                      "dong": "101",
                      "ho": "502"
                    }
                  ],
                  "totalCount": 1
                }
              }
            }
          },
          "400": {
            "description": "잘못된 요청 (유효하지 않은 쿼리 파라미터)"
          },
          "401": {
            "description": "인증 필요"
          },
          "403": {
            "description": "권한 없음 (ADMIN 또는 USER 역할 필요)"
          }
        }
      }
    },
    "/api/complaints/{complaintId}": {
      "get": {
        "tags": [
          "Complaints"
        ],
        "summary": "[민원] 민원 상세 조회",
        "description": "민원 상세 정보를 조회합니다. USER는 본인이 작성한 민원 또는 공개된 민원만 조회 가능하고, ADMIN은 관리 아파트의 모든 민원을 조회할 수 있습니다. 댓글 목록도 함께 반환됩니다.",
        "parameters": [
          {
            "name": "complaintId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "조회할 민원의 UUID"
          }
        ],
        "responses": {
          "200": {
            "description": "민원 상세 조회 성공",
            "content": {
              "application/json": {
                "example": {
                  "complaintId": "uuid-1234",
                  "userId": "user-uuid-5678",
                  "title": "엘리베이터 고장",
                  "writerName": "홍길동",
                  "createdAt": "2025-06-13T10:00:00.000Z",
                  "updatedAt": "2025-06-13T15:30:00.000Z",
                  "isPublic": true,
                  "viewsCount": 42,
                  "commentsCount": 3,
                  "status": "IN_PROGRESS",
                  "dong": "101",
                  "ho": "502",
                  "content": "엘리베이터가 자주 고장나서 불편합니다. 점검 부탁드립니다.",
                  "boardType": "COMPLAINT",
                  "comments": [
                    {
                      "id": "comment-uuid-9999",
                      "userId": "admin-uuid-1111",
                      "content": "확인했습니다. 조치하겠습니다.",
                      "createdAt": "2025-06-13T12:00:00.000Z",
                      "updatedAt": "2025-06-13T12:00:00.000Z",
                      "writerName": "관리자"
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "잘못된 요청 (민원 ID 형식 오류)"
          },
          "401": {
            "description": "인증 필요"
          },
          "403": {
            "description": "권한 없음 (ADMIN 또는 USER 역할 필요)"
          },
          "404": {
            "description": "민원을 찾을 수 없거나 조회 권한 없음"
          }
        }
      },
      "patch": {
        "tags": [
          "Complaints"
        ],
        "summary": "[민원] 민원 수정",
        "description": "입주민(USER)이 본인이 작성한 민원을 수정합니다. 제목, 내용, 공개 여부를 부분적으로 수정할 수 있습니다. PENDING 상태의 민원만 수정 가능합니다. <br><br>**Request Body (모두 선택):**<br>- title (string): 민원 제목 (2-100자)<br>- content (string): 민원 내용 (10-2000자)<br>- isPublic (boolean): 공개 여부",
        "parameters": [
          {
            "name": "complaintId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "수정할 민원의 UUID"
          }
        ],
        "responses": {
          "200": {
            "description": "민원 수정 성공",
            "content": {
              "application/json": {
                "example": {
                  "complaintId": "uuid-1234",
                  "userId": "user-uuid-5678",
                  "title": "엘리베이터 고장 (수정됨)",
                  "writerName": "홍길동",
                  "createdAt": "2025-06-13T10:00:00.000Z",
                  "updatedAt": "2025-06-13T16:00:00.000Z",
                  "isPublic": true,
                  "viewsCount": 42,
                  "commentsCount": 3,
                  "status": "PENDING",
                  "dong": "101",
                  "ho": "502"
                }
              }
            }
          },
          "400": {
            "description": "잘못된 요청 (민원 ID 형식 오류, 유효성 검증 실패, 수정할 데이터 없음)"
          },
          "401": {
            "description": "인증 필요"
          },
          "403": {
            "description": "권한 없음 (USER 역할 필요, 본인 민원이 아님, 또는 PENDING 상태가 아님)"
          },
          "404": {
            "description": "민원을 찾을 수 없음"
          }
        },
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "example": {
                "title": "엘리베이터 고장 (수정됨)",
                "content": "엘리베이터가 자주 고장나서 불편합니다. 빠른 점검 부탁드립니다.",
                "isPublic": true
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Complaints"
        ],
        "summary": "[민원] 민원 삭제",
        "description": "민원을 삭제합니다. USER는 본인이 작성한 PENDING 상태의 민원만 삭제 가능하고, ADMIN은 관리 아파트의 모든 민원을 삭제할 수 있습니다(상태 무관).",
        "parameters": [
          {
            "name": "complaintId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "삭제할 민원의 UUID"
          }
        ],
        "responses": {
          "200": {
            "description": "민원 삭제 성공",
            "content": {
              "application/json": {
                "example": {
                  "message": "정상적으로 삭제 처리되었습니다."
                }
              }
            }
          },
          "400": {
            "description": "잘못된 요청 (민원 ID 형식 오류)"
          },
          "401": {
            "description": "인증 필요"
          },
          "403": {
            "description": "권한 없음 (USER: 본인 민원이 아니거나 PENDING 상태가 아님, ADMIN: 관리 아파트의 민원이 아님)"
          },
          "404": {
            "description": "민원을 찾을 수 없음"
          }
        }
      }
    },
    "/api/complaints/{complaintId}/status": {
      "patch": {
        "tags": [
          "Complaints"
        ],
        "summary": "[민원] 민원 상태 변경 (관리자 전용)",
        "description": "관리자(ADMIN)가 민원의 처리 상태를 변경합니다. 접수 중(PENDING), 처리 중(IN_PROGRESS), 완료(RESOLVED), 반려(REJECTED) 중 하나로 변경할 수 있습니다. 민원 상세 정보와 댓글 목록을 함께 반환합니다. <br><br>**Request Body:**<br>- status (string, 필수): 변경할 민원 상태 (PENDING, IN_PROGRESS, RESOLVED, REJECTED)",
        "parameters": [
          {
            "name": "complaintId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "상태를 변경할 민원의 UUID"
          }
        ],
        "responses": {
          "200": {
            "description": "민원 상태 변경 성공",
            "content": {
              "application/json": {
                "example": {
                  "complaintId": "uuid-1234",
                  "userId": "user-uuid-5678",
                  "title": "엘리베이터 고장",
                  "writerName": "홍길동",
                  "createdAt": "2025-06-13T10:00:00.000Z",
                  "updatedAt": "2025-06-13T17:00:00.000Z",
                  "isPublic": true,
                  "viewsCount": 42,
                  "commentsCount": 3,
                  "status": "RESOLVED",
                  "dong": "101",
                  "ho": "502",
                  "content": "엘리베이터가 자주 고장나서 불편합니다. 점검 부탁드립니다.",
                  "boardType": "COMPLAINT",
                  "comments": [
                    {
                      "id": "comment-uuid-9999",
                      "userId": "admin-uuid-1111",
                      "content": "처리 완료했습니다.",
                      "createdAt": "2025-06-13T17:00:00.000Z",
                      "updatedAt": "2025-06-13T17:00:00.000Z",
                      "writerName": "관리자"
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "잘못된 요청 (민원 ID 형식 오류, 유효하지 않은 상태 값)"
          },
          "401": {
            "description": "인증 필요"
          },
          "403": {
            "description": "권한 없음 (ADMIN 역할 필요, 또는 관리 아파트의 민원이 아님)"
          },
          "404": {
            "description": "민원을 찾을 수 없음"
          }
        },
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "example": {
                "status": "RESOLVED"
              }
            }
          }
        }
      }
    },
    "/api/notices/": {
      "get": {
        "description": "",
        "responses": {
          "default": {
            "description": ""
          }
        },
        "tags": [
          "Notices"
        ]
      },
      "post": {
        "description": "",
        "responses": {
          "default": {
            "description": ""
          }
        },
        "tags": [
          "Notices"
        ]
      }
    },
    "/api/notices/{noticeId}": {
      "get": {
        "description": "",
        "responses": {
          "default": {
            "description": ""
          }
        },
        "tags": [
          "Notices"
        ]
      },
      "delete": {
        "description": "",
        "responses": {
          "default": {
            "description": ""
          }
        },
        "tags": [
          "Notices"
        ]
      },
      "patch": {
        "description": "",
        "responses": {
          "default": {
            "description": ""
          }
        },
        "tags": [
          "Notices"
        ]
      }
    },
    "/api/comments/": {
      "post": {
        "tags": [
          "Comments"
        ],
        "summary": "[댓글] 댓글 생성",
        "description": "입주민(USER) 또는 관리자(ADMIN)가 민원 또는 공지사항에 새로운 댓글을 작성합니다.<br><br>**Request Body:**<br>- content (string, 필수): 댓글 내용 (1-500자)<br>- boardType (string, 필수): 게시판 타입 (COMPLAINT 또는 NOTICE)<br>- boardId (string, 필수): 게시글 ID (UUID)",
        "responses": {
          "201": {
            "description": "댓글 생성 성공",
            "content": {
              "application/json": {
                "example": {
                  "comment": {
                    "id": "comment-uuid-1234",
                    "userId": "user-uuid-1234",
                    "content": "빠른 조치 부탁드립니다.",
                    "createdAt": "2025-06-13T10:30:00.000Z",
                    "updatedAt": "2025-06-13T10:30:00.000Z",
                    "writerName": "홍길동"
                  },
                  "board": {
                    "id": "complaint-uuid-5678",
                    "boardType": "COMPLAINT"
                  }
                }
              }
            }
          },
          "400": {
            "description": "잘못된 요청 (필수 필드 누락, 유효성 검증 실패 등)"
          },
          "401": {
            "description": "인증 필요"
          },
          "403": {
            "description": "권한 없음 (해당 게시글에 댓글 작성 권한 없음)"
          }
        },
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "example": {
                "content": "빠른 조치 부탁드립니다.",
                "boardType": "COMPLAINT",
                "boardId": "complaint-uuid-5678"
              }
            }
          }
        }
      }
    },
    "/api/comments/{commentId}": {
      "delete": {
        "tags": [
          "Comments"
        ],
        "summary": "[댓글] 댓글 삭제",
        "description": "댓글을 삭제합니다. USER는 본인이 작성한 댓글만 삭제할 수 있으며, ADMIN은 관리하는 아파트의 모든 댓글을 삭제할 수 있습니다.",
        "parameters": [
          {
            "name": "commentId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "삭제할 댓글의 UUID"
          }
        ],
        "responses": {
          "200": {
            "description": "댓글 삭제 성공",
            "content": {
              "application/json": {
                "example": {
                  "message": "정상적으로 삭제 처리되었습니다."
                }
              }
            }
          },
          "400": {
            "description": "잘못된 요청 (필수 필드 누락, 유효성 검증 실패 등)"
          },
          "401": {
            "description": "인증 필요"
          },
          "403": {
            "description": "권한 없음 (USER: 본인 댓글이 아님, ADMIN: 관리하는 아파트의 댓글이 아님)"
          },
          "404": {
            "description": "댓글을 찾을 수 없음"
          }
        }
      },
      "patch": {
        "tags": [
          "Comments"
        ],
        "summary": "[댓글] 댓글 수정",
        "description": "사용자가 본인이 작성한 댓글을 수정합니다. 다른 사용자의 댓글은 수정할 수 없습니다.<br><br>**Request Body:**<br>- content (string, 필수): 댓글 내용 (1-500자)<br>- boardType (string, 필수): 게시판 타입 (COMPLAINT 또는 NOTICE)<br>- boardId (string, 필수): 게시글 ID (UUID)",
        "parameters": [
          {
            "name": "commentId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "수정할 댓글의 UUID"
          }
        ],
        "responses": {
          "200": {
            "description": "댓글 수정 성공",
            "content": {
              "application/json": {
                "example": {
                  "comment": {
                    "id": "comment-uuid-1234",
                    "userId": "user-uuid-1234",
                    "content": "내용을 수정합니다.",
                    "createdAt": "2025-06-13T10:30:00.000Z",
                    "updatedAt": "2025-06-13T10:35:00.000Z",
                    "writerName": "홍길동"
                  },
                  "board": {
                    "id": "complaint-uuid-5678",
                    "boardType": "COMPLAINT"
                  }
                }
              }
            }
          },
          "400": {
            "description": "잘못된 요청 (필수 필드 누락, 유효성 검증 실패 등)"
          },
          "401": {
            "description": "인증 필요"
          },
          "403": {
            "description": "권한 없음 (본인이 작성한 댓글이 아님)"
          },
          "404": {
            "description": "댓글을 찾을 수 없음"
          }
        },
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "example": {
                "content": "내용을 수정합니다.",
                "boardType": "COMPLAINT",
                "boardId": "complaint-uuid-5678"
              }
            }
          }
        }
      }
    },
    "/api/notifications/{id}/read": {
      "patch": {
        "tags": [
          "Notifications"
        ],
        "summary": "[알림] 알림 읽음 처리",
        "description": "지정한 알림을 읽음 상태(isChecked: true)로 변경합니다. 본인에게 전송된 알림만 읽음 처리할 수 있습니다.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "example": "string"
                },
                "format": {
                  "type": "string",
                  "example": "uuid"
                }
              }
            },
            "description": "읽음 처리할 알림의 UUID"
          }
        ],
        "responses": {
          "200": {
            "description": "읽음 처리된 알림 반환",
            "content": {
              "application/json": {
                "example": {
                  "notificationId": "uuid-1234",
                  "content": "민원 처리가 완료되었습니다.",
                  "notificationType": "COMPLAINT_RESOLVED",
                  "notifiedAt": "2025-06-13T12:34:56.789Z",
                  "isChecked": true,
                  "complaintId": "complaint-uuid-9876",
                  "noticeId": "notice-uuid-1111",
                  "pollId": "poll-uuid-2222"
                }
              }
            }
          },
          "400": {
            "description": "잘못된 요청 (알림 ID 누락 등)"
          },
          "401": {
            "description": "인증 필요"
          },
          "404": {
            "description": "알림을 찾을 수 없거나 권한 없음"
          }
        }
      }
    },
    "/api/poll-scheduler/ping": {
      "get": {
        "tags": [
          "Poll-scheduler"
        ],
        "summary": "Poll 스케줄러 상태 확인",
        "description": "서버에 스케줄러가 정상 작동 중인지 확인하기 위한 개발/운영용 엔드포인트입니다. 프론트에서는 사용하지 않습니다.",
        "responses": {
          "200": {
            "description": "정상적으로 동작하는 경우",
            "content": {
              "application/json": {
                "example": {
                  "message": "Poll scheduler is running."
                }
              }
            }
          },
          "500": {
            "description": "스케줄러 비정상 응답",
            "content": {
              "application/json": {
                "example": {
                  "error": "Scheduler not responding"
                }
              }
            }
          }
        }
      }
    },
    "/api/": {
      "get": {
        "description": "",
        "responses": {
          "default": {
            "description": ""
          }
        },
        "tags": [
          "Api"
        ]
      }
    }
  },
  "tags": [
    {
      "name": "Auth",
      "description": "Auth 관련 API"
    },
    {
      "name": "Users",
      "description": "Users 관련 API"
    },
    {
      "name": "Complaints",
      "description": "Complaints 관련 API"
    },
    {
      "name": "Notices",
      "description": "Notices 관련 API"
    },
    {
      "name": "Comments",
      "description": "Comments 관련 API"
    },
    {
      "name": "Notifications",
      "description": "Notifications 관련 API"
    },
    {
      "name": "Poll-scheduler",
      "description": "Poll-scheduler 관련 API"
    },
    {
      "name": "Api",
      "description": "Api 관련 API"
    }
  ]
}