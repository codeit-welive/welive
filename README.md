# ğŸŒ³ Welive

## ğŸ“Œ í”„ë¡œì íŠ¸ ì†Œê°œ

ğŸŒ³ **â€œí•¨ê»˜ ì‚¬ëŠ” ê³µê°„, í•¨ê»˜ ë§Œë“œëŠ” ê´€ë¦¬.â€**  
**ìœ„ë¦¬ë¸Œ(Welive)**ëŠ” ì…ì£¼ë¯¼ê³¼ ê´€ë¦¬ ë‹¨ì²´ê°€ í•œìë¦¬ì—ì„œ ì†Œí†µí•˜ê³  ë¬¸ì œë¥¼ í•´ê²°í•˜ë©°, ë” ë‚˜ì€ ê³µë™ì²´ë¥¼ ë§Œë“¤ì–´ê°€ëŠ” ì•„íŒŒíŠ¸ ìƒí˜¸ ê´€ë¦¬ í”Œë«í¼ì…ë‹ˆë‹¤.
ë‹¹ì‹ ì˜ ì¼ìƒì´ ë” í¸í•´ì§€ëŠ” ê·¸ ìˆœê°„ê¹Œì§€, ìœ„ë¦¬ë¸Œê°€ í•¨ê»˜í•©ë‹ˆë‹¤.

---

## ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”

- **í”„ë¡œì íŠ¸ ê¸°ê°„**: 2025.10.17 ~ 2025.11.28
- **ëª©í‘œ**: ë ˆì´ì–´ë“œ ì•„í‚¤í…ì²˜ ê¸°ë°˜ì˜ ì•ˆì •ì ì´ê³  í™•ì¥ ê°€ëŠ¥í•œ í”„ë¡œì íŠ¸ ê´€ë¦¬ ë°±ì—”ë“œ êµ¬ì¶•
- **ì£¼ìš” ê¸°ëŠ¥**:
    - ì‚¬ìš©ì ì¸ì¦ ë° ìŠ¹ì¸ í”„ë¡œì„¸ìŠ¤  
      - ìŠˆí¼ê´€ë¦¬ì / ê´€ë¦¬ì / ì…ì£¼ë¯¼ì˜ ì—­í•  ê¸°ë°˜ ìŠ¹ì¸ êµ¬ì¡° ë° 2ì°¨ ì¸ì¦  
      - (ê´€ë¦¬ìÂ·ì…ì£¼ë¯¼ ìŠ¹ì¸ ìš”ì²­, ìŠ¹ì¸/ê±°ì ˆ, ìë™ ë§¤ì¹­)

      > [!NOTE]  
      > ì¸ì¦ì€ **JWT Access / Refresh Token** ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•˜ë©°, Refresh Tokenì€ DBì—ì„œ ìƒíƒœë¥¼ ê´€ë¦¬í•´ ë¡œê·¸ì•„ì›ƒÂ·ì¬ë°œê¸‰ ì‹œ ê¸°ì¡´ í† í°ì„ ë¬´íš¨í™”í•˜ë„ë¡ ì„¤ê³„í–ˆìŠµë‹ˆë‹¤.

    - ì…ì£¼ë¯¼ ëª…ë¶€ ê´€ë¦¬  
      - ê°œë³„ ë“±ë¡ / CSV ì—…ë¡œë“œ / ê²€ìƒ‰Â·í•„í„°Â·í˜ì´ì§€ë„¤ì´ì…˜ / ì¼ê´„ ì •ë¦¬ ê¸°ëŠ¥ ì œê³µ

      > [!WARNING]  
      > CSV ì—…ë¡œë“œ ì‹œ **í—¤ë” ëª…ì¹­ì´ ì •í™•íˆ ì¼ì¹˜**í•´ì•¼ í•˜ë©°, ì¸ì½”ë”©ì€ **UTF-8**ë§Œ ì§€ì›ë©ë‹ˆë‹¤.  
      > ì˜ëª»ëœ ì¹¼ëŸ¼ ë˜ëŠ” ëˆ„ë½ì´ ìˆëŠ” ê²½ìš°, í•´ë‹¹ íŒŒì¼ì€ ì „ì²´ ì—…ë¡œë“œê°€ ê±°ë¶€ë©ë‹ˆë‹¤.

    - ë¯¼ì›(ë¬¸ì˜) ê´€ë¦¬  
      - ìƒíƒœ(ì²˜ë¦¬ ì „Â·ì¤‘Â·ì™„ë£Œ) ë³€ê²½, ì‹¤ì‹œê°„ ì•Œë¦¼, ë¹„ê³µê°œ ì²˜ë¦¬, ìˆ˜ì •Â·ì‚­ì œ ì œí•œ ë¡œì§ í¬í•¨
    - ì£¼ë¯¼ íˆ¬í‘œ ì‹œìŠ¤í…œ  
      - íˆ¬í‘œê¶Œì ë²”ìœ„ ì„¤ì •, ì¼ì • ê¸°ë°˜ ìë™ ì˜¤í”ˆ/ë§ˆê°, ê²°ê³¼ ìë™ ê³µì§€ ë“±ë¡, ì‹¤ì‹œê°„ ì°¸ì—¬ ê°€ëŠ¥

    - ê³µì§€ì‚¬í•­ ë° ì¼ì • ê´€ë¦¬  
      - ì¹´í…Œê³ ë¦¬, ì¤‘ìš”ë„, ëŒ“ê¸€, ì¡°íšŒìˆ˜, ì¼ì • ìë™ ë°˜ì˜ ë“± ê´€ë¦¬ì ì¤‘ì‹¬ì˜ ê³µì§€ ìš´ì˜ ê¸°ëŠ¥
    - ëŒ“ê¸€ ì‹œìŠ¤í…œ  
      - ê³µì§€/ë¯¼ì› ê¸°ë°˜ ëŒ“ê¸€ ë“±ë¡Â·ìˆ˜ì •Â·ì‚­ì œ ê¸°ëŠ¥ ì œê³µ
    - ì•Œë¦¼ ì‹œìŠ¤í…œ (SSE)  
      - ë¯¼ì›Â·ê³µì§€Â·íˆ¬í‘œ ìƒíƒœ ë³€ê²½ ì‹œ ì‹¤ì‹œê°„ ì•Œë¦¼ ì „ì†¡
    - íŒŒì¼ ì—…ë¡œë“œ (í”„ë¡œí•„ ì‚¬ì§„)  
      - S3 ì—…ë¡œë“œ ê¸°ë°˜ì˜ ì•ˆì •ì ì¸ ì´ë¯¸ì§€ ì²˜ë¦¬

      > [!WARNING]  
      > ì—…ë¡œë“œëœ íŒŒì¼ì€ í™•ì¥ìê°€ ì•„ë‹ˆë¼ **ì‹¤ì œ ë°”ì´ë„ˆë¦¬(Magic Number)** ê¸°ë°˜ìœ¼ë¡œ ê²€ì¦ë˜ë©°,  
      > ì´ë¯¸ì§€ê°€ ì•„ë‹Œ íŒŒì¼ì„ ìœ„ì¥í•˜ì—¬ ì—…ë¡œë“œí•  ê²½ìš° ì„œë²„ì—ì„œ ì¦‰ì‹œ ì°¨ë‹¨ë©ë‹ˆë‹¤.

    - DB íŠ¸ëœì­ì…˜ ë° ë™ì‹œì„± ìµœì í™” êµ¬ì¡° ì„¤ê³„  
      - ëŒ€ëŸ‰ ì—…ë¡œë“œ(CSV), íˆ¬í‘œ ë§ˆê° ìŠ¤ì¼€ì¤„ëŸ¬ ë“±ì—ì„œì˜ íŠ¸ëœì­ì…˜ í˜¹ì€ ë™ì‹œì„± ì œí•œ ì²˜ë¦¬ ë° ì„±ëŠ¥ ê³ ë ¤

      > [!NOTE]  
      > Poll ìë™ í™œì„±í™”/ë§Œë£Œ ë¡œì§ì€ **Limiter ê¸°ë°˜ ë™ì‹œì„± ì œì–´**ë¡œ ë³´í˜¸ë˜ë©°,  
      > ë™ì¼ Pollì— ëŒ€í•œ ì¤‘ë³µ ìŠ¤ì¼€ì¤„ ì‹¤í–‰ì€ ìë™ìœ¼ë¡œ ë°©ì§€ë©ë‹ˆë‹¤.

---

## ğŸ‘¥ íŒ€ êµ¬ì„± ë° ì—­í• 

| ë‹´ë‹¹ì                                      | ì—­í•                                      | ë‹´ë‹¹ ëª¨ë“ˆ                                                                         | ì£¼ìš” ì±…ì„                                                                                              |
| ------------------------------------------- | ---------------------------------------- | --------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------ |
| [ìœ ì§„í˜¸(ë¦¬ë“œ)](https://github.com/selentia) | Backend Lead Â· System Architect Â· DevOps | Core, Infra/DevOps, Users, Events, Notifications/SSE, Poll Scheduler, ì „ì²´ ìŠ¤í‚¤ë§ˆ | ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ë° ìŠ¤í‚¤ë§ˆ ì„¤ê³„ / CoreÂ·ì„œë²„ íŒŒì´í”„ë¼ì¸ êµ¬ì¶• / ì¼ë¶€ ë„ë©”ì¸ ê°œë°œ ë° í…ŒìŠ¤íŠ¸Â·ë°°í¬ í™˜ê²½ êµ¬ì¶• / í”„ë¡œì íŠ¸ ë¬¸ì„œÂ·ì‚°ì¶œë¬¼(ìš”êµ¬Â·ì„¤ê³„Â·êµ¬í˜„Â·í…ŒìŠ¤íŠ¸Â·ë°°í¬) ë° ì‹œì—° ì˜ìƒ í†µí•© ì •ë¦¬ |
| [í•œì„ ì¬(íŒ€ì¥)](https://github.com/HSunJ)    | Auth & Residents & Apartments            | Auth, Residents, Apartments                                                       | Auth ê¸°ëŠ¥ ì „ë°˜ êµ¬í˜„ / ResidentsÂ·Apartments CRUDÂ·CSV / ì…ì£¼ë¯¼Â·ì•„íŒŒíŠ¸ ê¶Œí•œ ë¡œì§                          |
| [ê¹€ì¤€ì² ](https://github.com/nodejun)        | Complaints & Comments & Chat             | Complaints, Comments, Chat(Socket.io)                                             | ComplaintsÂ·Comments CRUD / ì‹¤ì‹œê°„ Chat API ê°œë°œ                                                        |
| [ê¹€ë‚˜ì—°](https://github.com/luciakim22)     | Polls & Notices                          | Polls, PollsVote, Notices                                                         | PollsÂ·PollsVote CRUD / Notices CRUD                                                                    |

---

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

### âš™ï¸ ë°±ì—”ë“œ ì„œë²„

| êµ¬ë¶„                        | ê¸°ìˆ                                                                                                               |
| --------------------------- | ----------------------------------------------------------------------------------------------------------------- |
| **ì–¸ì–´/ëŸ°íƒ€ì„**             | TypeScript, Node.js(Express 5)                                                                                    |
| **ì„œë²„ í”„ë ˆì„ì›Œí¬Â·êµ¬ì¡°**    | Express 5 ê¸°ë°˜ ì»¤ìŠ¤í…€ ì„œë²„(app.ts), ë¼ìš°í„° ëª¨ë“ˆ êµ¬ì¡°, ë¯¸ë“¤ì›¨ì–´ íŒŒì´í”„ë¼ì¸ ì„¤ê³„                                    |
| **ORM/DB**                  | Prisma, PostgreSQL                                                                                                |
| **ìŠ¤ì¼€ì¤„ëŸ¬**                | cron (íˆ¬í‘œ í™œì„±í™”/ë§Œë£Œ ì‘ì—…), **Limiter ê¸°ë°˜ Poll Scheduler(ì§ì ‘ êµ¬í˜„)**                                          |
| **ìœ íš¨ì„± ê²€ì¦**             | Zod(DTOÂ·BodyÂ·QueryÂ·Params, CSV ë°ì´í„° ê²€ì¦ í¬í•¨)                                                                  |
| **ì…ë ¥ ì •í™”(Sanitize)**     | isomorphic-dompurify + jsdom                                                                                      |
| **íŒŒì¼ ì—…ë¡œë“œ/ì´ë¯¸ì§€ ì²˜ë¦¬** | multer, sharp                                                                                                     |
| **AWS ì—°ë™**                | AWS SDK v3 (@aws-sdk/client-s3, credential-providers, s3-request-presigner) â€” S3 ì—…ë¡œë“œ                           |
| **ë³´ì•ˆ/ì•ˆì •í™”**             | helmet(CSP í¬í•¨), hpp, express-rate-limit, CORS(í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ ê¸°ë°˜), bcrypt(+pepper), jsonwebtoken(access/refresh) |
| **ë¡œê·¸/ëª¨ë‹ˆí„°ë§**           | Pino(ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œê·¸), Morgan(HTTP ìš”ì²­ ë¡œê·¸)                                                                   |
| **í™˜ê²½ë³€ìˆ˜ ê´€ë¦¬**           | dotenv, dotenv-cli, cross-env                                                                                     |

---

### ğŸ§ª ê°œë°œ ë° í…ŒìŠ¤íŠ¸

| êµ¬ë¶„                   | ê¸°ìˆ                                 |
| ---------------------- | ----------------------------------- |
| **í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬**  | Jest, ts-jest                       |
| **HTTP í…ŒìŠ¤íŠ¸**        | supertest                           |
| **ëª¨í‚¹/ë„êµ¬**          | jest.mock, jsdom                    |
| **ì •ì  ë¶„ì„**          | ESLint, TypeScript ESLint, Prettier |
| **ê²½ë¡œ/ë¹Œë“œ ìœ í‹¸ë¦¬í‹°** | tsc-alias, tsconfig-paths, rimraf   |

---

### ğŸ— ìš´ì˜Â·ë°°í¬(Infra / DevOps)

| êµ¬ë¶„                          | ê¸°ìˆ                                                     |
| ----------------------------- | ------------------------------------------------------- |
| **ì»¨í…Œì´ë„ˆ/ë°°í¬**             | Docker, docker-compose, GitHub Actions(CI/CD ìë™ ë°°í¬) |
| **ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ**             | Nginx                                                   |
| **ë°±ì—”ë“œ í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ ë°©ì‹** | Docker ì»¨í…Œì´ë„ˆ ë‹¨ì¼ ì‹¤í–‰ (PM2 ë¯¸ì‚¬ìš©)                  |
| **í”„ë¡ íŠ¸ì—”ë“œ ë°°í¬(ì°¸ê³ )**     | Next.js â†’ PM2 ê¸°ë°˜ í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰                        |
| **ë¡œê¹…/ìš´ì˜**                 | Pino ë¡œê·¸, Nginx Access/Error ë¡œê·¸                      |

---

### ğŸ§° ê°œë°œ í¸ì˜

| êµ¬ë¶„                            | ê¸°ìˆ                                 |
| ------------------------------- | ----------------------------------- |
| **ìë™ ì¬ì‹œì‘**                 | nodemon                             |
| **ë™ì‹œ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸**          | concurrently                        |
| **Swagger ë¬¸ì„œ ìë™ ìƒì„±/ì„œë¹™** | swagger-autogen, swagger-ui-express |

## ğŸ“‚ ë””ë ‰í„°ë¦¬ êµ¬ì¡°

í”„ë¡œì íŠ¸ ì „ì²´ êµ¬ì¡°ëŠ” ëŒ€ê·œëª¨ì´ê¸° ë•Œë¬¸ì—, ì£¼ìš” ì±…ì„ ë‹¨ìœ„ ì¤‘ì‹¬ìœ¼ë¡œ ìš”ì•½í•œ í˜•íƒœì…ë‹ˆë‹¤.

```
welive/
â”œâ”€â”€ .github/workflows/ # CI/CD íŒŒì´í”„ë¼ì¸ (CI, CD)
â”œâ”€â”€ infra/ # ë°°í¬/ì¸í”„ë¼ êµ¬ì„±
â”‚ â”œâ”€â”€ docker/ # Dockerfile, docker-compose, ì„œë²„ êµ¬ì„±
â”‚ â””â”€â”€ nginx/ # Nginx Reverse Proxy ì„¤ì •
â”‚
â”œâ”€â”€ prisma/ # Prisma ìŠ¤í‚¤ë§ˆ & ë§ˆì´ê·¸ë ˆì´ì…˜
â”‚ â”œâ”€â”€ schema.prisma
â”‚ â”œâ”€â”€ migrations/
â”‚ â””â”€â”€ seed.ts
â”‚
â”œâ”€â”€ public/ # ì •ì  íŒŒì¼ (í…œí”Œë¦¿ ë“±)
â”‚ â””â”€â”€ templates/
â”‚
â”œâ”€â”€ scripts/ # Swagger ìë™ ìƒì„± ë“± ìŠ¤í¬ë¦½íŠ¸
â”‚ â”œâ”€â”€ genSwagger.js
â”‚ â””â”€â”€ pinTree.js
â”‚
â”œâ”€â”€ src/
â”‚ â”œâ”€â”€ @types/ # Express íƒ€ì… í™•ì¥
â”‚ â”‚
â”‚ â”œâ”€â”€ common/ # ê³µí†µ ìœ í‹¸/ìƒìˆ˜/Error/Helper
â”‚ â”‚ â”œâ”€â”€ constants/
â”‚ â”‚ â”œâ”€â”€ errors/
â”‚ â”‚ â””â”€â”€ helpers/
â”‚ â”‚
â”‚ â”œâ”€â”€ core/ # ì•± ì½”ì–´ ë ˆì´ì–´
â”‚ â”‚ â”œâ”€â”€ aws/ # S3 ì—…ë¡œë“œ/ì‚­ì œ ìœ í‹¸
â”‚ â”‚ â”œâ”€â”€ files/ # íŒŒì¼ MIME/MagicNumber ê²€ì¦
â”‚ â”‚ â”œâ”€â”€ health/ # /health API
â”‚ â”‚ â”œâ”€â”€ middlewares/ # ì¸ì¦/CORS/CSV/Error í•¸ë“¤ëŸ¬
â”‚ â”‚ â”œâ”€â”€ sanitize/ # ì…ë ¥ ì •í™”(DOMPurify)
â”‚ â”‚ â”œâ”€â”€ socket/ # Socket.io ì´ˆê¸°í™”
â”‚ â”‚ â”œâ”€â”€ sse/ # SSE ë¼ìš°í„°/Emitter
â”‚ â”‚ â”œâ”€â”€ utils/ # Limiter, Zod wrapper ë“±
â”‚ â”‚ â”œâ”€â”€ app.ts # Express ì•± ì´ˆê¸°í™”
â”‚ â”‚ â”œâ”€â”€ env.ts # í™˜ê²½ ë³€ìˆ˜ ë¡œë”(Zod ê²€ì¦)
â”‚ â”‚ â”œâ”€â”€ httpLogger.ts
â”‚ â”‚ â”œâ”€â”€ logger.ts
â”‚ â”‚ â”œâ”€â”€ prisma.ts
â”‚ â”‚ â””â”€â”€ router.ts
â”‚ â”‚
â”‚ â”œâ”€â”€ jobs/ # Poll Scheduler(ìë™ í™œì„±í™”/ë§Œë£Œ)
â”‚ â”‚ â””â”€â”€ poll/
â”‚ â”‚
â”‚ â”œâ”€â”€ modules/ # ë„ë©”ì¸ ëª¨ë“ˆ (RouterÂ·ServiceÂ·RepoÂ·ValidatorÂ·Dto)
â”‚ â”‚ â”œâ”€â”€ apartments/
â”‚ â”‚ â”œâ”€â”€ auth/
â”‚ â”‚ â”œâ”€â”€ chats/
â”‚ â”‚ â”œâ”€â”€ comments/
â”‚ â”‚ â”œâ”€â”€ complaints/
â”‚ â”‚ â”œâ”€â”€ events/
â”‚ â”‚ â”œâ”€â”€ notices/
â”‚ â”‚ â”œâ”€â”€ notifications/
â”‚ â”‚ â”œâ”€â”€ poll-scheduler/
â”‚ â”‚ â”œâ”€â”€ polls/
â”‚ â”‚ â”œâ”€â”€ residents/
â”‚ â”‚ â””â”€â”€ users/
â”‚ â”‚
â”‚ â””â”€â”€ index.ts # ì„œë²„ ì—”íŠ¸ë¦¬
â”‚
â”œâ”€â”€ swagger/ # Swagger JSON ê²°ê³¼ë¬¼
â”‚
â”œâ”€â”€ tests/ # í†µí•© í…ŒìŠ¤íŠ¸ ë° Core í…ŒìŠ¤íŠ¸
â”‚ â”œâ”€â”€ core/
â”‚ â”œâ”€â”€ modules/
â”‚ â”œâ”€â”€ jobs/
â”‚ â””â”€â”€ setup/
â”‚
â”œâ”€â”€ logs/ # ì„œë²„/í…ŒìŠ¤íŠ¸ ë¡œê·¸
â”œâ”€â”€ .env* # í™˜ê²½ ë³€ìˆ˜ íŒŒì¼ë“¤
â”œâ”€â”€ jest.config.ts
â”œâ”€â”€ tsconfig.json
â””â”€â”€ package.json

```

---

## âš™ï¸ ì‹¤í–‰ ë°©ë²•

### 1) í™˜ê²½ ë³€ìˆ˜ ì˜ˆì‹œ (`.env.example`)

`.env.example` íŒŒì¼ì„ ì°¸ê³ í•˜ì—¬ ì‹¤ì œ í™˜ê²½ì— ë§ê²Œ `.env`, `.env.production`, `.env.test` íŒŒì¼ì„ êµ¬ì„±í•©ë‹ˆë‹¤.

```env
# DATABASE
DATABASE_URL=postgresql://<user_name>:<password>@localhost:5432/welive

# PORT
PORT=3001
FE_PORT=3000

# BASE URL (API ì˜¤ë¦¬ì§„)
BASE_URL=https://your.domain.com

# FRONT (í”„ë¡ íŠ¸ì—”ë“œ ì˜¤ë¦¬ì§„)
FRONT_URL=https://your.domain.com

# FILE URL (ì •ì  ì—…ë¡œë“œ ì ‘ê·¼ìš©)
FILE_BASE_URL_DEV=http://localhost:3001/api/uploads
FILE_BASE_URL=https://your.domain.com/api/uploads

# RUNTIME
CORS_ORIGIN=https://your.domain.com
ACCESS_TOKEN_SECRET=your_accesstoken_secret
REFRESH_TOKEN_SECRET=your_refreshtoken_secret
PASSWORD_PEPPER=your_password_pepper
DEFAULT_AVATAR_URL=https://your_bucket_name.s3.ap-northeast-2.amazonaws.com/default_avatar.png

# AWS S3
AWS_REGION=ap-northeast-2
AWS_S3_BUCKET_NAME=your_bucket_name
AWS_S3_BASE_URL=https://your_bucket_name.s3.ap-northeast-2.amazonaws.com
```

> [!WARNING]
> í…ŒìŠ¤íŠ¸ í™˜ê²½(`.env.test`)ì€ Jest ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ì‹œ ìë™ìœ¼ë¡œ ë¡œë“œë˜ë©°,  
> í…ŒìŠ¤íŠ¸ìš© DBëŠ” `test:reset`/`test:migrate` ê³¼ì •ì—ì„œ ì´ˆê¸°í™”ë©ë‹ˆë‹¤.  
> ìš´ì˜ DB ì—°ê²° ì •ë³´ê°€ `.env.test`ì— ë“¤ì–´ê°€ì§€ ì•Šë„ë¡ ë°˜ë“œì‹œ ì£¼ì˜í•´ì•¼ í•©ë‹ˆë‹¤.  

### 2) íŒ¨í‚¤ì§€ ì„¤ì¹˜

```bash
npm install
```

### 3) ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • (Prisma)

ê°œë°œ/í…ŒìŠ¤íŠ¸ í™˜ê²½ ëª¨ë‘ Prisma ìŠ¤í‚¤ë§ˆë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì´ˆê¸°í™”í•´ì•¼ í•©ë‹ˆë‹¤.

```bash
# ë§ˆì´ê·¸ë ˆì´ì…˜ + ì‹œë“œ ì „ì²´ ìˆ˜í–‰
npm run prisma:migrate

# ë˜ëŠ” ê°œë³„ ì‹¤í–‰:
npm run prisma:generate     # í”„ë¦¬ì¦ˆë§ˆ í´ë¼ì´ì–¸íŠ¸ ìƒì„±
npm run prisma:reset        # DB ì´ˆê¸°í™” (dev)
npm run seed                # seed.ts ì‹¤í–‰
npm run prisma:studio       # Prisma Studio(ì›¹ ê¸°ë°˜ DB UI)
```

### 4) ê°œë°œ ì„œë²„ ì‹¤í–‰

ì´ í”„ë¡œì íŠ¸ëŠ” ë°±ì—”ë“œ(Express), í”„ë¡ íŠ¸ì—”ë“œ(Next.js) ë¥¼ ë™ì‹œì— ê°œë°œí•˜ê¸° ìœ„í•´ `concurrently`ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

```bash
npm run dev
```

#### ê°œë³„ ì‹¤í–‰ ë°©ë²•

**ë°±ì—”ë“œ ë‹¨ë… ì‹¤í–‰**

```bash
npm run dev:be
```

**í”„ë¡ íŠ¸ ë‹¨ë… ì‹¤í–‰**

```bash
npm run dev:fe
```

### 5) í…ŒìŠ¤íŠ¸ ì‹¤í–‰

jest í™˜ê²½ì€ `.env.test`ë¥¼ ìë™ ë¡œë“œí•˜ë©°,  
Prisma í…ŒìŠ¤íŠ¸ DBëŠ” `test:migrate`/`test:reset`ìœ¼ë¡œ ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```bash
npm test            # ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ (--runInBand)
npm run test:watch  # ë³€ê²½ ê°ì§€
npm run test:cov    # í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€
```

í…ŒìŠ¤íŠ¸ìš© DB ì´ˆê¸°í™”:

```bash
npm run test:reset
npm run test:migrate
```

> [!WARNING]
> í…ŒìŠ¤íŠ¸ ì´ˆê¸°í™”(`test:reset`)ëŠ” í…ŒìŠ¤íŠ¸ìš© DBë¥¼ ì „ë¶€ ë¹„ìš°ê³  ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ë‹¤ì‹œ ì ìš©í•˜ë¯€ë¡œ,  
> ì‹¤ì œ ë°ì´í„°ê°€ ì €ì¥ëœ DBì™€ëŠ” ë°˜ë“œì‹œ ë¶„ë¦¬ëœ í™˜ê²½ì—ì„œ ì‹¤í–‰í•´ì•¼ í•©ë‹ˆë‹¤.

### 6) ë¹Œë“œ

```bash
npm run build
```

ë¹Œë“œë¥¼ ìˆ˜í–‰í•˜ë©´ `dist/` ë””ë ‰í„°ë¦¬ê°€ ìƒì„±ë˜ê³ ,
`tsc-alias`ë¡œ ê²½ë¡œ aliasê°€ ìë™ ë³€í™˜ë©ë‹ˆë‹¤.

### 7) í”„ë¡œë•ì…˜ ì‹¤í–‰

í”„ë¡ íŠ¸ëŠ” PM2ë¡œ ì‹¤í–‰í•˜ê³ ,  
ë°±ì—”ë“œëŠ” Docker ê¸°ë°˜ìœ¼ë¡œ ìš´ì˜í•˜ëŠ” í™˜ê²½ê³¼ PM2 ê¸°ë°˜ í™˜ê²½ ëª¨ë‘ ì§€ì›í•˜ë„ë¡ ìŠ¤í¬ë¦½íŠ¸ê°€ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.  

**PM2 ê¸°ë°˜ ì‹¤í–‰ (ë¡œì»¬ / ì„œë²„ ê³µìš©)**

```bash
npm start     # (= start:be && start:fe)
```

**ë°±ì—”ë“œë§Œ ì‹¤í–‰**

```bash
npm run start:be
```

**í”„ë¡ íŠ¸ë§Œ ì‹¤í–‰**

```bash
npm run start:fe
```

**ì¤‘ì§€:**

```bash
npm run stop
```

> [!WARNING]
> `npm run stop` ìŠ¤í¬ë¦½íŠ¸ëŠ” `pm2 delete` ì‹¤íŒ¨ ì‹œì—ë„ í”„ë¡œì„¸ìŠ¤ë¥¼ ê³„ì† ì§„í–‰í•˜ë„ë¡ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.  
> PM2 í”„ë¡œì„¸ìŠ¤ê°€ ìˆ˜ë™ìœ¼ë¡œ ì¢…ë£Œëœ ìƒíƒœë¼ë©´ ê²½ê³ ê°€ ì¶œë ¥ë  ìˆ˜ ìˆì§€ë§Œ, ì´ëŠ” ì •ìƒ ë™ì‘ì…ë‹ˆë‹¤.  

### 8) Swagger ë¬¸ì„œ ìƒì„±

SwaggerëŠ” ìë™ ìƒì„± ìŠ¤í¬ë¦½íŠ¸(genSwagger.js) ë¥¼ í†µí•´ /swagger/swagger.jsonìœ¼ë¡œ ë¹Œë“œë©ë‹ˆë‹¤.

```bash
npm run swagger:generate
```

ì´í›„ /api/docs ê²½ë¡œì—ì„œ Swagger UIë¡œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> [!NOTE]
> `swagger/swagger.json` íŒŒì¼ì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš°, ì„œë²„ëŠ” ë¶€ì •í™•í•œ ë¬¸ì„œ ìƒíƒœë¡œì˜ ë°°í¬ë¥¼ ë§‰ê¸° ìœ„í•´ ì¦‰ì‹œ ì¢…ë£Œë˜ë„ë¡ ì„¤ê³„ë˜ì–´ ìˆìŠµë‹ˆë‹¤.  
> ë°°í¬ ì „ì— ë°˜ë“œì‹œ `npm run swagger:generate`ë¥¼ ì‹¤í–‰í•´ì•¼ í•©ë‹ˆë‹¤.  

---

## ğŸ” ë³´ì•ˆ ê¸°ë³¸ ì„¤ì •

WeLive ì„œë²„ëŠ” Express 5 ê¸°ë°˜ìœ¼ë¡œ, ë‹¤ìŒê³¼ ê°™ì€ ë‹¤ì¸µ ë³´ì•ˆ ìš”ì†Œë¥¼ ì ìš©í•˜ì—¬ ì•ˆì •ì„±ê³¼ ì•ˆì „ì„±ì„ ê°•í™”í–ˆìŠµë‹ˆë‹¤.

### 1) HTTP ë³´ì•ˆ í—¤ë”

- **helmet** ì ìš©
  - CSP(Content Security Policy) ì»¤ìŠ¤í…€ êµ¬ì„±
  - `frame-ancestors: none`, `object-src: none` ë“± í´ë¦­ì¬í‚¹ ë° ìœ„ë³€ì¡° ë°©ì§€
  - ê°œë°œ í™˜ê²½ì—ì„œë§Œ `img-src`ì— `blob:` í—ˆìš©

### 2) X-Powered-By & ETag ì œê±°

- `app.disable('x-powered-by')` ë¡œ Express ë…¸ì¶œ ì œê±°
- `app.set('etag', false)` ë¡œ ETag ê¸°ë°˜ ìºì‹± ë¬´íš¨í™” (ë³´ì•ˆ ì·¨ì•½ì  ì™„í™”)

### 3) Rate Limiting (ìš”ì²­ ì œí•œ)

- **express-rate-limit** ì ìš©
  - 15ë¶„ ê¸°ì¤€ ìµœëŒ€ 1000 ìš”ì²­
  - í‘œì¤€ í—¤ë” ì ìš©(429 ë©”ì‹œì§€ ê°œì„ )

### 4) HTTP Parameter Pollution ë°©ì§€

- **hpp** ì‚¬ìš©
  - ì¤‘ë³µëœ íŒŒë¼ë¯¸í„°ë¡œ ì¸í•œ HPP ê³µê²© ì°¨ë‹¨

### 5) CORS í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ ê¸°ë°˜ ì œí•œ

- í™˜ê²½ ë³€ìˆ˜ ê¸°ë°˜ **ì •ì  ì˜¤ë¦¬ì§„ í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ êµ¬ì„±**
- ì¸ì¦ ì¿ í‚¤ ë° JWT í—¤ë” ë…¸ì¶œ ì œì–´

### 6) Proxy Trust ì„¤ì •

- `app.set('trust proxy', [...])`
  - Nginx í”„ë¡ì‹œ ë’¤ì—ì„œ ì‹¤í–‰ë  ë•Œ ì •í™•í•œ IP/í”„ë¡œí† ì½œ ì •ë³´ ì‚¬ìš© ê°€ëŠ¥

### 7) ìš”ì²­ Body ë³´í˜¸

- `express.json({ limit: '2mb' })` ë¡œ ë³¸ë¬¸ í¬ê¸° ì œí•œ
- URL-encoded payloadë„ ì œí•œì  í—ˆìš©

### 8) ì¿ í‚¤ ì²˜ë¦¬

- **cookie-parser** ì‚¬ìš©
  - ë¡œê·¸ì¸Â·ì„¸ì…˜Â·ë³´ì¡° ë°ì´í„° íŒŒì‹±
  - (í•„ìš”í•œ ìµœì†Œ ë²”ìœ„ë¡œ ì œí•œí•˜ì—¬ ì‚¬ìš©)

### 9) ì‘ë‹µ ì••ì¶•

- **compression(gzip)** ì ìš©
  - ì‘ë‹µ í¬ê¸° ê°ì†Œ â†’ DDoS í‘œë©´ ê°ì†Œ

### 10) ì •ì  íŒŒì¼ ë³´ì•ˆ

- MIME ê¸°ë°˜ íŒŒì¼ ìœ íš¨ì„± ê²€ì‚¬
- sharp ê¸°ë°˜ ì´ë¯¸ì§€ ì²˜ë¦¬ë¡œ ì•…ì„± ì´ë¯¸ì§€Â·Payload ìˆ¨ê¸°ê¸° ë°©ì§€
- Magic Number ê¸°ë°˜ MIME ê²€ì¦(`assertAllowedByMagic.ts`)

### 11) ì…ë ¥ ì •í™”(Input Sanitization)

- **DOMPurify(isomorphic-dompurify + jsdom)**
  - ëŒ“ê¸€/ê²Œì‹œê¸€ì—ì„œ ì•…ì„± ìŠ¤í¬ë¦½íŠ¸ ì œê±° (ì„œë²„ë‹¨ Sanitization)

### 12) ì¸ì¦ ë³´ì•ˆ

- ë¡œê·¸ì¸/íšŒì›ê°€ì…/í† í° ì „ì†¡ì€ **JWT Access + Refresh Token êµ¬ì¡°**
- ë¹„ë°€ë²ˆí˜¸ëŠ” **bcrypt + pepper** ì¡°í•©ìœ¼ë¡œ ê°•í™” í•´ì‹±
- Refresh Tokenì€ DBì—ì„œ ìƒíƒœ ê´€ë¦¬
- TokenUtilsì—ì„œ ì„œëª…Â·ë§Œë£ŒÂ·ê°±ì‹  ë¡œì§ í†µí•© ê´€ë¦¬

### 13) SSE & WebSocket ë³´í˜¸

- SSE ì—°ê²° ì‹œ **JWT ê¸°ë°˜ í—¤ë” ì¸ì¦**
- WebSocket(Socket.io)ë„ ë¯¸ë“¤ì›¨ì–´ë¡œ JWT ì¸ì¦ ì ìš©

### 14) ì„œë²„ ì˜¤ë¥˜ ë…¸ì¶œ ë°©ì§€

- ê¸€ë¡œë²Œ ì—ëŸ¬ í•¸ë“¤ëŸ¬ë¡œ
  - ë‚´ë¶€ ìŠ¤íƒíŠ¸ë ˆì´ìŠ¤ ìˆ¨ê¹€
  - ì¼ì •í•œ ì—ëŸ¬ ì‘ë‹µ í˜•ì‹ ìœ ì§€(ApiError)

### 15) Swagger ë³´ì•ˆ

- Swagger íŒŒì¼ì´ ì¡´ì¬í•˜ì§€ ì•Šì„ ê²½ìš° ì„œë²„ ìë™ ì¤‘ë‹¨  
  â†’ ì˜ëª» êµ¬ì„±ëœ ë¬¸ì„œ/ë°°í¬ ë°©ì§€

---

## âœ… ì§„í–‰ ê²°ê³¼ í•˜ì´ë¼ì´íŠ¸

- **ì¸í”„ë¼/ë°°í¬**
  - Docker ê¸°ë°˜ ë°±ì—”ë“œ ì»¨í…Œì´ë„ˆ êµ¬ì¶• ë° Nginx Reverse Proxy êµ¬ì„±
  - GitHub Actions ê¸°ë°˜ CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì¶• (í…ŒìŠ¤íŠ¸ â†’ ë¹Œë“œ â†’ GHCR Push â†’ EC2 ìë™ ë°°í¬)
  - RDS/EC2 í™˜ê²½ì—ì„œ ìµœì¢… í”„ë¡œë•ì…˜ ë°°í¬ ì™„ë£Œ ë° ì•ˆì •ì  ìš´ì˜ ì¤‘

- **ë°±ì—”ë“œ ì•„í‚¤í…ì²˜**
  - ì „ì²´ Prisma ìŠ¤í‚¤ë§ˆ ì•„í‚¤í…ì²˜ ì„¤ê³„ ë° Core ë ˆì´ì–´ êµ¬ì¶•(env/logger/middlewares/router)
  - Express 5 ê¸°ë°˜ ì„œë²„(app.ts) ì„¤ê³„: CSP/ë³´ì•ˆ í—¤ë”, rate-limit, HPP, CORS, Proxy ì‹ ë¢°, gzip ì••ì¶• ë“± ì „ì²´ ë³´ì•ˆ íŒŒì´í”„ë¼ì¸ êµ¬ì„±
  - SSE ê¸°ë°˜ ì‹¤ì‹œê°„ ì•Œë¦¼ ì‹œìŠ¤í…œ ë° Socket.io ì‹¤ì‹œê°„ ì±„íŒ… ëª¨ë“ˆ êµ¬ì¶•
  - Poll ìë™ í™œì„±í™”/ë§Œë£Œ ìŠ¤ì¼€ì¤„ëŸ¬ ì„¤ê³„(Limiter ê¸°ë°˜ ë™ì‹œì„± ì œì–´ í¬í•¨)

- **ë°±ì—”ë“œ ì£¼ìš” ê¸°ëŠ¥**
  - ì‚¬ìš©ì í”„ë¡œí•„/ì´ë¯¸ì§€ ì—…ë¡œë“œ(S3 Presigned URL), ìœ ì € ì •ë³´ ìˆ˜ì • ê¸°ëŠ¥
  - ê³µì§€/ë¯¼ì›/ëŒ“ê¸€/ì…ì£¼ë¯¼/ì•„íŒŒíŠ¸/íˆ¬í‘œ(Polls) CRUD ì „ì²´ ê¸°ëŠ¥ ì™„ì„±
  - Notifications REST + SSE ì•Œë¦¼ í†µí•© ì‹œìŠ¤í…œ êµ¬í˜„
  - ì´ë²¤íŠ¸(Calendar) ëª¨ë“ˆ êµ¬ì¶• ë° ê´€ë¦¬ì/ìœ ì € ê¶Œí•œ íë¦„ ì •ë¦½

- **í…ŒìŠ¤íŠ¸/í’ˆì§ˆ**
  - Core, Modules, Jobs ì „ì²´ì— ê±¸ì¹œ í†µí•© í…ŒìŠ¤íŠ¸ ì‘ì„±(Jest + Supertest)
  - SSE, Scheduler, Prisma íŠ¸ëœì­ì…˜/ìºìŠ¤ì¼€ì´ë“œ í…ŒìŠ¤íŠ¸ í¬í•¨
  - ESLint/Prettier/tsconfig êµ¬ì„± ì •ë¹„ ë° ì „ì²´ ì½”ë“œ í’ˆì§ˆ ì•ˆì •í™”

- **ì‹œì—°/ìš´ì˜**
  - Swagger ìë™ ìƒì„± ë° API ë¬¸ì„œí™” ì™„ë¹„
  - ê°œë°œÂ·í…ŒìŠ¤íŠ¸Â·í”„ë¡œë•ì…˜ í™˜ê²½ ë¶„ë¦¬(.env/.env.test/.env.production)
  - í”„ë¡ íŠ¸ì—”ë“œ ì—°ë™ í…ŒìŠ¤íŠ¸ ì™„ë£Œ ë° ìµœì¢… ë°°í¬ ì„±ê³µ

---

## ğŸ“Œ ë§í¬

- íŒ€ í˜‘ì—… ë¬¸ì„œ(Notion): ê°±ì‹  ì˜ˆì •
- ìµœì¢… ë°œí‘œ ìë£Œ: ê°±ì‹  ì˜ˆì •
- ì‹œì—° ì˜ìƒ: ê°±ì‹  ì˜ˆì •
- ì €ì¥ì†Œ: https://github.com/codeit-welive/welive
- ì‚°ì¶œë¬¼:
  - 1. ìš”êµ¬ì‚¬í•­ ë¶„ì„: [ë§í¬](https://docs.google.com/document/d/11Kl92rqan2iA_5K8Q_3UCQXxkDiuzfVb10B0d-X-JTQ/edit?usp=sharing)
  - 2. ì„¤ê³„: [ë§í¬](https://docs.google.com/document/d/1cymp9U-yK94KXXUE7jiBzh5EP23w9luxXiKN50FrFGA/edit?usp=sharing)
  - 3. êµ¬í˜„: [ë§í¬](https://docs.google.com/document/d/1hgKMj29_KXsSXFceEgQGOPSlGxUAqYg32ujF5OWZd2U/edit?usp=sharing)
  - 4. í…ŒìŠ¤íŠ¸: [ë§í¬](https://docs.google.com/document/d/1Dnkksd0Oa1b5dHiuudu5tm-BDBxiOFkTnExfLzwxJVw/edit?usp=sharing)
  - 5. ë°°í¬ ë° ìœ ì§€ë³´ìˆ˜: [ë§í¬](https://docs.google.com/document/d/1Pq4H3DNUBoLCKIp0Jdt3oD8kg3pb66YLEaR4uXr8KJg/edit?usp=sharing)
